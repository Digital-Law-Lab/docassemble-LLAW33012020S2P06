---
include:
  - CLCSA_Questions.yml
  - CLCSA_List_of_Services.yml
  - CLCSA_List_of_Services_Code.yml
  - CLCSA_CSS_Code.yml
---
metadata:
  title: |
    Community Legal Centres South Australia
  short title: |
    CLCSA
  authors:
    - name: Shae Smith
    - name: Jessica Phuong-Rafferty
    - name: Mattea Romano
    - name: Andjela Jovic
    - name: Zahraa Alwan
  organisation: Flinders University
  show login: False
  exit url: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
  exit label: Exit to Forecast Website
---
objects:
  - CLCSAlogo: DAStaticFile.using(filename='CLCSAlogo.jpg')
---
features:
  css: CLCSA_CSS_Website.css
  debug: False
  hide standard menu: True
  progress bar: True
  show progress bar percentage: True
  navigation back button: True
---
mandatory: True
code: |
  set_parts(logo='<img src="' + CLCSAlogo.url_for() + '" style="height: 156px;">')
---
# Welcome screen
mandatory: true
question: How to Get Help
subquestion: |
  
  Welcome to the Community Legal Centres South Australia (CLCSA) service directory. This application will ask some questions and give you a list of services.
  <hr>
  
  #### **Privacy Statement:**
  > Your data will not be stored. Data will be deleted at the end of the application. Data is gathered to find services for you. 
  <hr>
  
  #### **Disclaimer:**
  > A safe exit button is provided in case you need an emergency exit from the website. This is displayed in yellow in the question screens.
  
  > This application should not be used as professional legal advice.
  
  > This application will only find legal services in SA.
  
  > This application will ask personal questions. Do you agree?
  
buttons:  
  - I agree: continue
  - No thanks: exit
    url: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    
---
# Final Screen
mandatory: true
question: Thank you for completing this application. Here are your responses,
subquestion: |
  
  Questions                           |Answers
  ------------------------------------|--------
  Location                            | ${display_CLCSAlocation}
  Legal Issue                         | ${display_CLCSAlegalissue}
  Gender                              | ${CLCSAgender}
  Aboriginal or Torres Strait Islander| ${CLCSAindigenous}
  
  #### Here are the list of services:
  <hr>
  
  % if len(CLCSAdisplay_specific_gender) > 0:
  #### Gender-specific services:
  
  ${CLCSAdisplay_gender_list['display_record'].show()}
  %endif
  
  % if len(CLCSAdisplay_indigenous) > 0:
  #### Services for Aboriginal and Torres Strait Islander people:
  
  ${CLCSAdisplay_indigenous_list['display_record'].show()}
  % endif
  
  % if len(CLCSAdisplay_leftovers) > 0:
  #### General Services:
  
  ${CLCSAdisplay_leftover_list['display_record'].show()}
  % endif
  
progress: 100
buttons:
  - Exit: exit
    url: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
  - Restart: restart
---  
# This is meant to be a a template for the list of services - need to check if works
template: CLCSA_Services[i]['display_record']
content: |
  **[${ CLCSA_Services[i].item('name') }]**  
  ${ CLCSA_Services[i].item('address') }[BR]
  ${ CLCSA_Services[i].item('phone') }[BR]
  ${ CLCSA_Services[i].item('legal issue') }[BR]
---
# Table Block for Gender
table: CLCSAdisplay_gender_list
rows: CLCSAdisplay_specific_gender
columns:
  - Name of Service: |
      row_item['name']
  - Address: |
      row_item['display address']
  - Phone: |
      row_item['display phone']
  - This service specialises in: |
      row_item['display legal issue']
---
# Table block for Indigenous list
table: CLCSAdisplay_indigenous_list
rows: CLCSAdisplay_indigenous
columns:
  - Name of Service: |
      row_item['name']
  - Address: |
      row_item['display address']
  - Phone: |
      row_item['display phone']
  - This service specialises in: |
      row_item['display legal issue']
---
# Table block for leftover list
table: CLCSAdisplay_leftover_list
rows: CLCSAdisplay_leftovers
columns:
  - Name of Service: |
      row_item['name']
  - Address: |
      row_item['display address']
  - Phone: |
      row_item['display phone']
  - This service specialises in: |
      row_item['display legal issue']
---
# Display legal issue as a bullet list.  If there
# is only one issue, then don't have a single
# bullet list.
# We construct the bullet list by creating a string 
# of HTML commands (markdown doesn't work in code I
# just found out this morning :-)
# We save our bullet list to display in a key called
# 'display legal issue' and we use that in our table.
code: |
  # Initialise the display with an empty string.  We'll use
  # a temp variable here because it's easier to read
  # The '<ul>' and '<li>' tags that you see are HTML commands
  # to make a bullet list.  
  CLCSAtemp_list = '<ul>'

  # Now add each item to the string as a markdown bullet list item
  for an_issue in CLCSA_Services[i]['legal issue']:
    if an_issue == 'Other':
      an_issue = 'General Services'
    CLCSAtemp_list = '{}<li>{}</li>'.format(CLCSAtemp_list, an_issue)

  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  # Now we've added each item, we can assign the temp variable
  # to the 'real' variable we want displayed
  CLCSA_Services[i]['display legal issue'] = CLCSAtemp_list
---
# Display locations as a bullet list.
# I haven't put as many comments in here just in case all the 
# comments are confusing
code: |
  CLCSAtemp_list = '<ul>'

  for an_issue in CLCSA_Services[i]['location']:
    CLCSAtemp_list = '{}<li>{}</li>\n'.format(CLCSAtemp_list, an_issue)
  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  CLCSA_Services[i]['display location'] = CLCSAtemp_list
---
# This code does something similar but it works on the
# CLCSAlegalissue checkbox instead of the data structure
code: |
  CLCSAtemp_list = '<ul>'
  for an_issue in CLCSAlegalissue.true_values():
    if an_issue == 'Other':
      an_issue = 'General Services'
    CLCSAtemp_list = '{}<li>{}</li>'.format(CLCSAtemp_list, an_issue)

  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  display_CLCSAlegalissue = CLCSAtemp_list
---
# Bullet list code for location in checkbox - it works!
code: |
  CLCSAtemp_list = '<ul>'
  for an_issue in CLCSAlocation.true_values():
    CLCSAtemp_list = '{}<li>{}</li>'.format(CLCSAtemp_list, an_issue)

  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  display_CLCSAlocation = CLCSAtemp_list
---
# Bullet list for phone numbers - it works!
code: |
  CLCSAtemp_list = '<ul>'  
  
  for an_issue in CLCSA_Services[i]['phone']:
    CLCSAtemp_list = '{}<li>{}</li>\n'.format(CLCSAtemp_list, an_issue)
  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  CLCSA_Services[i]['display phone'] = CLCSAtemp_list
---
# Bullet list for address - it works!
code: |
  CLCSAtemp_list = '<ul>'  
  
  for an_issue in CLCSA_Services[i]['address']:
    CLCSAtemp_list = '{}<li>{}</li>\n'.format(CLCSAtemp_list, an_issue)
  CLCSAtemp_list = '{}</ul>'.format(CLCSAtemp_list)
  CLCSA_Services[i]['display address'] = CLCSAtemp_list
---