# ---
# include:
#  - CLCSA_Questions.yml
#  - CLCSA_List_of_Services.yml # reaplce with static file in csv
#  - CLCSA_List_of_Services_Code.yml # replace with python module
#  - CLCSA_CSS_Code.yml # replace with python modules
---
modules:
  - .clcsa_database
---
metadata:
  title: |
    Community Legal Centres South Australia
  short title: |
    CLCSA
  authors:
    - name: Shae Smith
    - name: Jessica Phuong-Rafferty
    - name: Mattea Romano
    - name: Andjela Jovic
    - name: Zahraa Alwan
  organisation: Flinders University
  show login: False
  exit url: https://www.clcsa.org.au/
  exit label: Exit to CLCSA Website
---
objects:
  - CLCSAlogo: DAStaticFile.using(filename='CLCSAlogo.jpg')
  - user: Individual
---
features:
  css: CLCSA_CSS_Website.css
  debug: False
  hide standard menu: True
  progress bar: True
  show progress bar percentage: True
  navigation back button: True
---
Mandatory: True
code: |
  set_parts(logo='<img src="' + CLCSAlogo.url_for() + '" style="height: 156px;">')
---
# code block for high level interview order/logic
Mandatory: True
code: |
  intro_screen
  user.gender
  user.atsi
  user.address.country = "AU"
  suburb
  if user.gender == "female":
    user.female_legal_needs
  if user.gender == "male" or "other":
    user.legal_needs
  user_summary_for_review  
---
question: CLCSA Service Directory
subquestion: |
  
  Welcome to the Community Legal Centres South Australia (CLCSA) service directory. This application will ask a series of questions and provide you with a list of legal services.
  <hr>
  
  #### **Privacy Statement:**
  > CLCSA aims to protect your data. Your data will not be stored. Data will be deleted at the end of the application. Data is gathered only to create a list of services for you. 
  <hr>
  
  #### **Disclaimer:**
  > A safe exit button is provided to you in case you need an emergency exit from the website. This is displayed in yellow in the question screens. The 'I do not agree' button will also direct you to a safe website.
  
  > This application should not be used as professional legal advice.
  
  > This application will only find legal services in SA.
  
  > This application will ask personal questions. Do you agree?
field: intro_screen
buttons:  
  - I agree: continue
  - I do not agree: exit

---
question: What is your gender?
fields:
  - no label: user.gender
    datatype: radio
    choices:
      - "Male": male
      - "Female": female
      - "Other": other

progress: 10
action buttons:
  - label: Safe Exit
    action: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    color: warning
    icon: sign-out-alt

---
question: Do you identify as Aboriginal, Torres Strait Islander or a First Nations person?
fields:
  - no label: user.atsi
    datatype: radio
    choices:
      - Yes: True
      - No: False
      - "Do not want to say": False

progress: 20
action buttons:
  - label: Safe Exit
    action: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    color: warning
    icon: sign-out-alt
---
question: Location details
subquestion: Please enter your suburb so we can match you to a service.

fields:
  - Suburb: suburb
    code: get_suburb_list()
      
progress: 40
action buttons:
  - label: Safe Exit
    action: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    color: warning
    icon: sign-out-alt
---
# women's issues screeen
question: Do you need any of the following?

field: user.female_legal_needs
buttons:
  - "Family violence": user.female_legal_needs.family_violence # map to women's legal service SA 
    image: family_violence
  - "Family Law": user.femal_legal_needs.family_law # map to women's legal service SA 
  - "Employment Law": user.female_legal_needs.employment_law # map to working women's centre 
    none of the above: False

progress: 40 
action buttons:
  - label: Safe Exit
    action: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    color: warning
    icon: sign-out-alt
---
question: What type of legal issue do you have?
subquestion: |
  You may select more than one legal issue.

fields: 
  - no label: user.legal_needs
    datatype: checkboxes
    choices:
      - "Centrelink": centrelink
        #  image: centrelink_pic
      - "Family violence": family_violence
        #  image: domestic violence
      - "Elder Abuse": elder_abuse
        #  image: elder_pic
      - "Environmental": environmental
        #  image: enviromental
      - "Financial and debt": financial
        #  image: financial
      - Homelessness: homelessness
        #  image: homelessness
      - Refugee Advocacy: refugee_migration
        #  image: migration
      - Mediation (conflicts, disputes): mediation
        #  image: mediation
      - Disability: disability
        # image: TBC
      - Youth: youth
        # image: TBC 
      - Other: Other
        #  image: other
    none of the above: False

progress: 60
action buttons:
  - label: Safe Exit
    action: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
    color: warning
    icon: sign-out-alt 

---
# User summary
field: user_summary_for_review
question: Thank you for completing this application. Here are your responses,
subquestion: |
  
  Questions                           |Answers
  ------------------------------------|--------
  Location                            | ${suburb}
  Legal Issue                         | ${user.legal_needs}
  Gender                              | ${user.gender}
  Aboriginal or Torres Strait Islander| ${user.atsi}
  
# ${user.address.city}

progress: 90
buttons:
  - Exit: exit
    url: http://www.bom.gov.au/sa/forecasts/adelaide.shtml
  - Restart: restart 